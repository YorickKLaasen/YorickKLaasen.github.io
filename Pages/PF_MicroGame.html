<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.css" rel="stylesheet" />
        <link rel="stylesheet" 
        type="text/css" 
        href="PFMicro.css">
    </head>
<body>

  <div class="sidebar">
    <h5 style="letter-spacing: 5px;">Scrollbar</h5>
    <a href="#Information" class="btn btn-outline-light mb-2">Information</a>
    <a href="#GameConcept" class="btn btn-outline-light mb-2">Game Concept</a>
    <a href="#GameTrailer" class="btn btn-outline-light mb-2">Game Trailer</a>
    <a href="#Mycontributions" class="btn btn-outline-light mb-2">My Contributions</a>
    <a href="#Mycontributions" class="btn btn-outline-light mb-2">Main Menu</a>
    <a href="#ShopDesign" class="btn btn-outline-light mb-2">Shop Design</a>
    <a href="#MyCode" class="btn btn-outline-light mb-2">My Code</a>
</div>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="background-color: blue;">
<div class="container d-flex justify-content-between">
    <a class="navbar-brand" href="index.html">Home Page</a>
    <a class="navbar-brand" href="Portfolio.html">Portfolio</a>
    <a class="navbar-brand" href="MyProjects.html">My Projects</a>
</div>
</nav>

<div class="main" style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <h1>Neon Dasher</h1>
    <img src="Logo.jpg" alt="Placeholder voor Cover Art" style="width: 500px; height:500px;">
    <h6>Made With: Sam Schutten, Leon Bijker, Thom Hermelink</h6>
    <h2 id="Information">Project information</h2>
    <p>this game is called Neon Dasher the theme is Neon. the goal is to get as far as possible without crashing/dying. and use abilities to survive</p>
    <p>you are a car which drives in a neon themed. you keep going faster making the game harder the longer you last.</p>
    <p>you can collect crystals which is the currency with which you can buy Cosmetics,Themes and Abilities in the Shop.</p>
    <p>The Cosmetics are to Customize your car with different skins or colors</p>
    <p>With The Themes you can change the scenery around you so that you can change it if you dont like the current theme.</p>
    <p>Abilities give you a different way to play the game like Slow Down which slows down your game when its to fast</p>
    <h1 id="GameTrailer">Game Trailer</h1>
    <video width="600" height="500" controls>
        <source src="GameTrailer.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
  
  <div class="concept" id="GameConcept">
    <h2>GameConcept</h2>
    <p style="max-width: 800px;">The concept of the game is a Infinite Runner type of game.
      where you have to try and survive for as long as possible to get a higher score.
      you have to avoid Obstacles along the way and you have a certain amount of lives that go down when you hit an obstacle.
      you can collect Crystals along the way which you can use in the shop for Abilities,Cosmetics and Themes.
      you also have Achievements/Challenges which you can go for to get rewards.</p>
  </div>

  <div class="contributions" id="Mycontributions"></div></div>
  <div class="MycontributionsTitle">
      <h2>My Contributions</h2>
  </div>
    <h3>Main Menu Design</h3>
    <div class="menuContent">
      <img src="MainMenu.jpg" alt="MainMenu" style="width: 400px; height:650px;">
      <div class="textContent">
        <h4>Main Menu Info</h4>
        <h6>This is the Homescreen/MainMenu design i made.</h6>
        <p>it has 4 buttons the Start/Continue Game, Shop, Statistics and Quit</p>
        <p>the Start/Continue Game button lets you play the game or continue the game if you had already played it before</p>
        <p>the Shop button sends you to the shop where you can buy cosmetics and abilities for a better playing experience</p>
        <p>the Statistics button sends you to the Statistics Menu where you can see your player statistics and Achievement Milestones</p>
        <p>and the Quit button closes the game when you are done playing.</p>
        <p>in the top left you can see how many crystals you have earned and own right now you can spend them in the shop</p>
        <p>and as last you can see our logo of the game with the Title</p>
      </div>
    </div>
  </div>

  <div class="shopContent" id="ShopDesign">
    <h3>Shop Design</h3>
    <div class="shopItems">
      <img src="CosmeticShop.jpg" alt="Cosmetic Shop" style="width: 400px; height:650px;">
      <img src="Shop.jpg" alt="Shop" style="width: 400px; height:650px;">
      <img src="AbilityShop.jpg" alt="Ability Shop" style="width: 400px; height:650px;">
    </div>
    <h4>About the Shop</h4>
    <p>This is the Shop i made in this project where you can buy Skins and Abilities/PowerUps</p>
    <p>on the left is the Cosmetics Shop where you can buy skins to customize your avatar/car</p>
    <p>on the right is the Abilities Shop where you can buy abilities so that you last longer in the game</p>
    <p>in the middle is the main menu of the shop with the buttons to go to the panel of the chosen shop</p>
  </div>
  <div class="codeBox" id="MyCode">
    <h3>My Code</h3>
    <div class="codeContent">
      <h4>CarCollision.cs</h4>
        <div class="codeContainer">
          <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using TMPro;
using UnityEngine;
using UnityEngine.SceneManagement;

public class CarCollision : MonoBehaviour
{
    [SerializeField] private PlayerAbilities playerAbilities;
    [SerializeField] GameOverScreen gameOver;
    [SerializeField] TextMeshProUGUI livesText;

    //can hit an object 3 times in a certain time before "dieing"
    public int PlayerLives = 3;
    GameObject MapGenerator;
    public bool PlayerDied = false;

    private void Start()
    {
        livesText.text = "Lives:" + PlayerLives;//laat zien hoeveel levens je hebt
        MapGenerator = GameObject.FindGameObjectWithTag("MapGenerator");//zoekt een GameObject met deze tag
    }
    private void Update()
    {
        if (!playerAbilities.isFlying)
        {
            Collider2D[] colliders = Physics2D.OverlapCircleAll(transform.position, 0.1f);//pakt alle colliders om de player heen
            foreach (Collider2D collider in colliders)//loopt door elke collider en kijkt of het de tag void heeft
            {
                if (collider.CompareTag("Void"))
                {
                    StartCoroutine(VoidTimer());
                    break;
                }
            }
        }
    }

    private void OnTriggerEnter2D(Collider2D collision)
    {
        if (collision.gameObject.CompareTag("Obstacles"))
        {
            if (playerAbilities.isInvincible)//returned als de player invincible is dus niet geraakt kan worden
            {
                return;
            }
            if (!playerAbilities.isInvincible)//als de player niet invincible is
            {
                PlayerLives--;
                livesText.text = "Lives:" + PlayerLives;//geeft livesText de waarde van PlayerLives
                if (PlayerLives <= 0)
                {
                    MapGenerator.GetComponent<MapGeneration>().RemoveItemFromActiveList(collision.gameObject);//zoekt de MapGeneration component en haalt het gecollide object uit de list
                    PlayerDied = true;
                    Time.timeScale = 0f;
                    gameOver.Died();//als de player dood is laad die de gameover screen in
                }
            }
            Destroy(collision.gameObject);//destroyed het gecollide obstacle gameobject

        }
        if (collision.gameObject.CompareTag("Void"))//kijkt of het gecollide object als void is getagged
        {
            if (!playerAbilities.isFlying)//als de player niet vliegt
            {
                StartCoroutine(VoidTimer());
            }
        }
    }
    IEnumerator VoidTimer()
    {
        yield return new WaitForSeconds(0.5f);//timer om te reageren voordat je doodgaat
        Time.timeScale = 0f;//zet de timescale op 0
        gameOver.Died();//laad de gameOverscreen zien
    }
}
        </code></pre>         
        </div>
    </div>
    <div class="codeContent">
      <h4>ShopMenu.cs</h4>
        <div class="codeContainer">
          <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using TMPro;
using UnityEngine.SceneManagement;
using System.IO;
using static HomeScreenStruct;
using Unity.VisualScripting;

public class ShopMenu : MonoBehaviour
{
    [SerializeField] int playerCrystals;
    [SerializeField] TextMeshProUGUI crystalsText;
    [SerializeField] TextMeshProUGUI graySkinText, blackSkinText, redSkinText, purpleSkinText, blueSkinText, cyanSkinText, greenSkinText, yellowSkinText, flameSkinText, retrowaveSkinText;
    [SerializeField] TextMeshProUGUI obsDestroyText, slowDownText, invincibilityText, flightText;
    public HomeScreenStruct jsonStruct;
    public ShopDataHandler shopHandler;
    string path;
    int Coins, Distance;
    Test1 data;
    public ShopData shopData;

    private void Start()
    {
        LoadCrystals();
        LoadShopData();
        UpdateShopUI();
    }
    private void Update()
    {
        UpdateShopUI();
    }
    private void LoadCrystals()
    {
        path = Path.Combine(Application.persistentDataPath, "data.json");

        if (File.Exists(path))
        {
            string str = File.ReadAllText(path);
            data = JsonUtility.FromJson<HomeScreenStruct.Test1>(str);
            playerCrystals = data.crystals;
        }
        else//anders is playerCrystals 0
        {
            playerCrystals = 0;
        }

        crystalsText.text = playerCrystals.ToString();
    }
    public void GraySkinPurchase()
    {
        if (playerCrystals >= 3 && graySkinText.text == "Purchase")
        {
            shopData.grayBought = true;
            playerCrystals -= 3;
            graySkinText.text = "Equip";
            crystalsText.text = playerCrystals.ToString();
            shopData.equippedSkin = "graySkin";
    
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();
            data.crystals = playerCrystals;
            data.Distance = Distance;
            jsonStruct.SaveToJson(data);
        }
        else if (graySkinText.text == "Equip")
        {
            graySkinText.text = "Equipped";
            shopData.equippedSkin = "graySkin";
    
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();
        }
    }
    public void SlowDownPurchase()
    {
        if (playerCrystals >= 10)
        {
            shopData.slowDownAmount += 1;
            playerCrystals -= 10;
            slowDownText.text = "Amount Owned: " + shopData.slowDownAmount;
            crystalsText.text = playerCrystals.ToString();
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();
            data.crystals = playerCrystals;
            data.Distance = Distance;
            jsonStruct.SaveToJson(data);
        }
    }
}
          </code></pre>
        </div>
    </div>
    <div class="codeContent">
      <h4>ShopData.cs</h4>
      <div class="codeContainer">
        <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public struct ShopData
{
    public bool grayBought;
    public bool blackBought;
    public bool redBought;
    public bool purpleBought;
    public bool blueBought;
    public bool cyanBought;
    public bool greenBought;
    public bool yellowBought;
    public bool flameBought;
    public bool retrowaveBought;
    public int obstacleDestroyAmount;
    public int slowDownAmount;
    public int invincibilityAmount;
    public int flightAmount;
    public string equippedSkin;
}
        </code></pre>
      </div>
    </div>
    <div class="codeContent">
      <h4>ShopDataHandler.cs</h4>
      <div class="codeContainer">
        <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using System.IO;
using UnityEngine;

public class ShopDataHandler : MonoBehaviour
{
    public ShopData shopData;
    string datafile;
    void Start()
    {
        datafile = Path.Combine(Application.persistentDataPath, "shopData.json");
        if (File.Exists(datafile))
        {
            ReadJsonFile();
        }
        else
        {
            MakeJsonFile();
        }
    }
    private void InitializeShopData()
    {
        shopData = new ShopData
        {
            grayBought = false,
            blackBought = false,
            redBought = false,
            purpleBought = false,
            blueBought = false,
            cyanBought = false,
            greenBought = false,
            yellowBought = false,
            flameBought = false,
            retrowaveBought = false,
            obstacleDestroyAmount = 0,
            slowDownAmount = 0,
            invincibilityAmount = 0,
            flightAmount = 0,
            equippedSkin = "whiteSkin"
        };

    }
    void MakeJsonFile()
    {
        InitializeShopData();
        string str = JsonUtility.ToJson(shopData, true);
        File.WriteAllText(datafile, str);
    }
    void ReadJsonFile()
    {
        string str = File.ReadAllText(datafile);
        shopData = JsonUtility.FromJson<ShopData>(str);
    }
    public void SaveShopDataToJson()
    {
        string jsonString = JsonUtility.ToJson(shopData, true);
        File.WriteAllText(datafile, jsonString);
    }
}
        </code></pre>
      </div>
    </div>
    <div class="codeContent">
      <h4>SkinLoader.cs</h4>
      <div class="codeContainer">
        <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using System.IO;
using UnityEngine;
using UnityEngine.SceneManagement;

public class SkinLoader : MonoBehaviour
{
    public ShopData shopData;
    [SerializeField] GameObject skinLoader;
    void Start()
    {
        skinLoader = GameObject.Find("SkinLoader");
        LoadShopData();
        SkinsLoader();
    }

    private void LoadShopData()
    {
        string shopDataPath = Path.Combine(Application.persistentDataPath, "shopData.json");

        if (File.Exists(shopDataPath))
        {
            string jsonString = File.ReadAllText(shopDataPath);
            shopData = JsonUtility.FromJson<ShopData>(jsonString);
        }
        else//als er geen shopData is gevonden
        {
            print("Geen shopData gevonden, nieuwe standaardwaarden worden aangemaakt.");
        }
    }
    private void SkinsLoader()
    {
        string[] skinNames = {"whiteSkin", "graySkin", "blackSkin", "redSkin", "purpleSkin",
                            "blueSkin", "cyanSkin", "greenSkin", "yellowSkin", "flameSkin","retrowaveSkin" };
        string[] childNames = { "Car_White", "Car_Gray", "Car_Black", "Car_Red", "Car_Purple",
                             "Car_Blue", "Car_Cyan", "Car_Green", "Car_Yellow", "Car_Flame", "Car_Retrowave" };
        for (int i = 0; i < skinNames.Length; i++)//loopt 1x voor elke skinName in de array
        {
            if (shopData.equippedSkin == skinNames[i])
            {
                Transform skinTransform = transform.Find(childNames[i]);
                if (skinTransform != null)
                {
                    skinTransform.gameObject.SetActive(true);
                }
                else
                {
                    print(childNames[i] + " not found as child of skinLoader.");
                }
                break;
            }
        }
    }
}
        </code></pre>
      </div>
    </div>
    <div class="codeContent">
      <h4>PlayerAbilities.cs</h4>
      <div class="codeContainer">
        <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using System.IO;
using TMPro;
using UnityEngine;
using UnityEngine.UI;

public class PlayerAbilities : MonoBehaviour
{
    [SerializeField] GameObject projectilePrefab;
    [SerializeField] Transform firePoint;
    [SerializeField] float projectileSpeed = 10f;
    [SerializeField] Button fireButton;
    CarCollision carCollision;
    public bool isInvincible = false;
    public bool isFlying = false;
    [SerializeField] TextMeshProUGUI destroyText, slowDownText, InvincibleText, flightText;
    public ShopDataHandler shopHandler;
    ShopData shopData;
    //alle errors van de console uit dit script negeren graag
    private void Start()
    {
        LoadShopData();
        fireButton.onClick.AddListener(ObstacleDestroyUse);//kaboom knop
        destroyText.text = "Left: " + shopData.obstacleDestroyAmount.ToString();
        slowDownText.text = "Left: " + shopData.slowDownAmount.ToString();
        InvincibleText.text = "Left: " + shopData.invincibilityAmount.ToString();
        flightText.text = "Left: " + shopData.flightAmount.ToString();
    }
    private void LoadShopData()//laad de shopData in
    {
        string shopDataPath = Path.Combine(Application.persistentDataPath, "shopData.json");

        if (File.Exists(shopDataPath))
        {
            string jsonString = File.ReadAllText(shopDataPath);
            shopData = JsonUtility.FromJson<ShopData>(jsonString);
        }
        else//als er geen shopData is gevonden
        {
            print("Geen shopData gevonden, nieuwe standaardwaarden worden aangemaakt.");
        }
    }
    public void ObstacleDestroyUse()
    {
        if (shopData.obstacleDestroyAmount >= 1)
        {
            if (projectilePrefab != null && firePoint != null)
            {
                GameObject projectile = Instantiate(projectilePrefab, new Vector3(firePoint.position.x, firePoint.position.y, 0), firePoint.rotation);//Instantiate de bullet

                Rigidbody2D rb = projectile.GetComponent<Rigidbody2D>();//haalt de rigidbody van de bullet op
                if (rb != null)//checkt of de rigid body null is
                {
                    rb.velocity = firePoint.up * projectileSpeed;//geeft de Rigidbody een velocity
                }
                shopData.obstacleDestroyAmount -= 1;//haalt -1 van de obstacleDestroyAmount waarde
                shopHandler.shopData = shopData;
                shopHandler.SaveShopDataToJson();//slaat de json op
                destroyText.text = "Left: " + shopData.obstacleDestroyAmount.ToString();//print het nieuwe aantal uit
                Destroy(projectile, 4f);//destroyed het na 4 seconden
            }
            else//print deze error uit als de kogel of firepoint niet zijn geassigned
            {
                Debug.LogError("Projectile prefab or firePoint is not assigned.");
            }
        }
    }
    public void SlowDownUse()//als de player de slowDown ability gebruikt
    {
        if (shopData.slowDownAmount >= 1)
        {
            shopData.slowDownAmount -= 1;//verandert de waarde met -1 van slowDownAmount
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();//slaat de data op
            slowDownText.text = "Left: " + shopData.slowDownAmount.ToString();//update de slowDowntext met de nieuwe waarde
            StartCoroutine(SlowDownTimer());//begint een timer voor de duratie van de ability
        }
    }
    public void InvincibilityUse()
    {
        if (shopData.invincibilityAmount >= 1)
        {
            shopData.invincibilityAmount -= 1;
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();
            InvincibleText.text = "Left: " + shopData.invincibilityAmount.ToString();
            StartCoroutine(InvincibilityTimer());
        }
    }
    public void FlightUse()
    {
        if (shopData.flightAmount >= 1)
        {
            shopData.flightAmount -= 1;
            shopHandler.shopData = shopData;
            shopHandler.SaveShopDataToJson();
            flightText.text = "Left: " + shopData.flightAmount.ToString();
            StartCoroutine(FlightTimer());
        }
    }

    IEnumerator SlowDownTimer()
    {
        Time.timeScale = 0.55f;//verandert hoe snel alles gaat naar 0.55f = 55% van normaal
        yield return new WaitForSeconds(4);//duratie van de ability
        Time.timeScale = 1f;//zet de timeScale weer terug naar normaal
    }
    IEnumerator InvincibilityTimer()
    {
        isInvincible = true;//zet de isInvincible bool op true
        yield return new WaitForSeconds(5f);//duratie van de ability
        isInvincible = false;//zet de bool weer op false
    }
    IEnumerator FlightTimer()
    {
        isFlying = true;
        yield return new WaitForSeconds(3);
        isFlying = false;
    }
}
        </code></pre>
      </div>
    </div>
    <div class="codeContent">
      <h4>ProjectileCollision.cs</h4>
      <div class="codeContainer">
        <pre><code class="language-csharp">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ProjectileCollision : MonoBehaviour
{
    [SerializeField] MapGeneration mapGeneration;
    private void OnTriggerEnter2D(Collider2D collision)
    {
        if (collision.CompareTag("Obstacles"))//als de player collide met iets getagged als obstacles
        {
            if (collision.gameObject != null && gameObject != null)//checkt of de player en obstacle niet null zijn
            {
                mapGeneration.RemoveItemFromActiveList(gameObject);//haaltde obstacle uit de list
                Destroy(collision.gameObject);//destroyed de obstacle
                Destroy(gameObject);//destroyed de projectile
            }
        }
    }
}
        </code></pre>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.js"></script>
</body>
</html>